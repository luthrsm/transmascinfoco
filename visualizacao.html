<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="src/css/responsive.css">
    <link rel="stylesheet" href="src/css/visualizacao.css">

    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.js"
        integrity="sha512-8Z5++K1rB3U+USaLKG6oO8uWWBhdYsM3hmdirnOEWp8h2B1aOikj5zBzlXs8QOrvY9OxEnD2QDkbSKKpfqcIWw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
        integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://kit.fontawesome.com/ebbc1aa60f.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <title>Transmasculinidades em Foco</title>
    <link rel="shortcut icon"
        href="https://img.myloview.com.br/posters/vector-flat-trans-transgender-transsexual-flag-symbol-isolated-on-white-background-700-257840239.jpg">
</head>

<body>
    <header class="navbar">
        <div class="logo">
            <img src="src/img/logo.png" alt="logo">
        </div>
        <div class="logoMb">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" id="Transgender">
                <path fill="#f0f0f0" fill-rule="evenodd" d="M24 29.9301C24.5522 29.9301 25 30.3778 25 30.9301V41C25 41.5523 24.5522 42 24 42C23.4477 42 23 41.5523 23 41V30.9301C23 30.3778 23.4477 29.9301 24 29.9301Z" clip-rule="evenodd" class="color333333 svgShape"></path>
                <path fill="#f0f0f0" fill-rule="evenodd" d="M20 37.9301C20 37.3778 20.4477 36.9301 21 36.9301H27C27.5522 36.9301 28 37.3778 28 37.9301 28 38.4824 27.5522 38.9301 27 38.9301H21C20.4477 38.9301 20 38.4824 20 37.9301zM24 13C19.5817 13 16 16.5818 16 21 16 25.4183 19.5817 29 24 29 28.4182 29 32 25.4183 32 21 32 16.5818 28.4182 13 24 13zM24 11C18.4771 11 14 15.4772 14 21 14 26.5229 18.4771 31 24 31 29.5228 31 34 26.5229 34 21 34 15.4772 29.5228 11 24 11z" clip-rule="evenodd" class="color333333 svgShape"></path>
                <path fill="#f0f0f0" fill-rule="evenodd" d="M31.2906 16.7049C30.9013 16.3132 30.9033 15.68 31.2951 15.2907L38.8783 7.75507C39.2701 7.36578 39.9032 7.36777 40.2925 7.75953C40.6818 8.15128 40.6798 8.78444 40.2881 9.17373L32.7048 16.7094C32.3131 17.0987 31.6799 17.0967 31.2906 16.7049Z" clip-rule="evenodd" class="color333333 svgShape"></path>
                <path fill="#f0f0f0" fill-rule="evenodd" d="M37.8751 15.8273C37.4846 16.2178 36.8514 16.2178 36.4609 15.8273L32.2183 11.5846C31.8277 11.1941 31.8277 10.5609 32.2183 10.1704 32.6088 9.77989 33.242 9.77989 33.6325 10.1704L37.8751 14.4131C38.2656 14.8036 38.2656 15.4367 37.8751 15.8273zM40 13.0001C39.4477 13.0001 39 12.5524 39 12.0001V9.00008H36C35.4477 9.00008 35 8.55237 35 8.00008 35 7.4478 35.4477 7.00008 36 7.00008H40C40.5523 7.00008 41 7.4478 41 8.00008V12.0001C41 12.5524 40.5523 13.0001 40 13.0001zM9.17131 7.75717L16.167 14.7529C16.5576 15.1434 16.5576 15.7766 16.167 16.1671 15.7765 16.5576 15.1433 16.5576 14.7528 16.1671L7.75709 9.17139C7.36657 8.78086 7.36657 8.1477 7.75709 7.75717 8.14762 7.36665 8.78078 7.36665 9.17131 7.75717z" clip-rule="evenodd" class="color333333 svgShape"></path>
                <path fill="#f0f0f0" fill-rule="evenodd" d="M13 8C13 8.55228 12.5523 9 12 9H9V12C9 12.5523 8.55228 13 8 13C7.44772 13 7 12.5523 7 12V8C7 7.44772 7.44772 7 8 7H12C12.5523 7 13 7.44772 13 8Z" clip-rule="evenodd" class="color333333 svgShape"></path>
              </svg>
        </div>
        <ul class="navigation">
            <li><a href="index.html">home</a></li>
            <li><a href="posts.html">posts</a></li>
            <li><a href="sobre.html">sobre</a></li>
            <li><a href="login.html"><i class="fa-solid fa-circle-user"></i></a></li>
        </ul>

        <div class="hamburguer">
            <i class="fa-solid fa-bars on"></i>
        </div>

        <div class="alert">
            <ul class="hamburguerNav">
                <i class="fa-solid fa-x close"></i>
                <li><a href="index.html">home</a></li>
                <li><a href="posts.html">posts</a></li>
                <li><a href="sobre.html">sobre</a></li>
                <li><a href="login.html"><i class="fa-solid fa-circle-user"></i></a></li>
            </ul>
        </div>
    </header>

    <section class="fotoCapa">
        <!-- <img src="" alt=""> -->
    </section>

    <section class="materia">
        <h1 class="tituloMateria"></h1>
        <h2 class="subtituloMateria"></h2>
        <div class="publicacao">
            <p class="data"></p>
            <p class="autor"></p>
        </div>
        <div class="texto">
            <p class="textoNormal"></p>
            <div class="txtFoto">

                <div class="img">
                    <img src="" alt="" class="imgTxt">
                    <p class="legenda"></p>
                </div>
            </div>

            <p class="textoNormal"></p>
            <p class="textoNormal"></p>
        </div>
    </section>

    <footer>

        <div class="logo">
            <img src="src/img/logo.png" alt="" srcset="">
        </div>
        <div class="nav">
            <ul class="navFooter">
                <li><a href="index.html">home</a></li>
                <li><a href="posts.html">posts</a></li>
                <li><a href="sobre.html">sobre</a></li>
                <li><a href="https://www.iel.unicamp.br">site do iel</a></li>
            </ul>
        </div>
        <div class="logo">
            <img src="src/img/unicamp logo.png" alt="" srcset="">
        </div>
        <hr>
        <p class="copyright">todos os direitos reservados © 2025 | desenvolvido por <a
                href="https://nicolasdev-portifolio.vercel.app">Nicolas dos Santos</a></p>

    </footer>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCESrYs_Nj2i6mxlZZWdTWjUeff9z61myc",
            authDomain: "blogtransmascinfoco.firebaseapp.com",
            projectId: "blogtransmascinfoco",
            storageBucket: "blogtransmascinfoco.appspot.com",
            messagingSenderId: "898028804976",
            appId: "1:898028804976:web:91c5923d58c3dcc2dc4db5"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        function getPostIdFromURL() {
            const params = new URLSearchParams(window.location.search);
            return params.get('id');
        }

        async function carregarPost() {
            const postId = getPostIdFromURL();
            if (!postId) return;

            const postRef = doc(db, "posts", postId);
            const postSnap = await getDoc(postRef);

            if (postSnap.exists()) {
                const post = postSnap.data();

                document.querySelector('.tituloMateria').textContent = post.titulo || '';
                document.querySelector('.subtituloMateria').textContent = post.subtitulo || '';
                const dataObj = post.criadoEm.toDate();
                const dataFormatada = dataObj.toLocaleDateString('pt-BR', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
                const horaFormatada = dataObj.toLocaleTimeString('pt-BR', {
                    hour: '2-digit',
                    minute: '2-digit'
                });

                document.querySelector('.data').textContent = `Criado em: ${dataFormatada} às ${horaFormatada}`;

                document.querySelector('.autor').textContent = `Autor: ${post.autor}`;
                const paragrafos = (post.conteudo || '').split(/\n+/).map(p => p.trim()).filter(p => p.length > 0);

                const textoDiv = document.querySelector('.texto');
                textoDiv.innerHTML = '';

                paragrafos.forEach((p, index) => {
                    if (index === 2) {
                        const txtFotoDiv = document.createElement('div');
                        txtFotoDiv.classList.add('txtFoto');

                        // Criar div.paragrafos
                        const paragrafosDiv = document.createElement('div');
                        paragrafosDiv.classList.add('paragrafos');

                        // Primeiro parágrafo
                        const textoFotoP1 = document.createElement('p');
                        textoFotoP1.classList.add('textoFoto');
                        textoFotoP1.textContent = p;
                        paragrafosDiv.appendChild(textoFotoP1);

                        // Segundo parágrafo
                        if (paragrafos[index + 1]) {
                            const textoFotoP2 = document.createElement('p');
                            textoFotoP2.classList.add('textoFoto');
                            textoFotoP2.textContent = paragrafos[index + 1];
                            paragrafosDiv.appendChild(textoFotoP2);
                        }

                        txtFotoDiv.appendChild(paragrafosDiv); // adiciona os parágrafos dentro da div

                        // Imagem + legenda
                        const imgDiv = document.createElement('div');
                        imgDiv.classList.add('img');
                        imgDiv.innerHTML = `
        <img src="${post.imagemTexto}" alt="imagem ilustrativa" class="imgTxt">
        <p class="legenda">${post.legenda || ''}</p>
    `;
                        txtFotoDiv.appendChild(imgDiv);

                        textoDiv.appendChild(txtFotoDiv);
                    }

                    else if (index !== 3) {
                        // pula o index 3, pois ele já foi usado acima
                        const pEl = document.createElement('p');
                        pEl.classList.add('textoNormal');
                        pEl.textContent = p;
                        textoDiv.appendChild(pEl);
                    }
                });


                if (post.imagemMaior) {
                    document.querySelector('.fotoCapa').innerHTML = `<img src="${post.imagemMaior}" alt="${post.titulo}">`;
                }
            } else {
                document.querySelector('.materia').innerHTML = '<p>Post não encontrado.</p>';
            }
        }

        carregarPost();
    </script>



</body>

</html>